<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Claim Form | Ascent Admin</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <h1>Claim Worksheet</h1>
                <div class="company-info">
                    <p>Ascent Administration</p>
                </div>
            </div>
            <div class="form-status">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="progress-bar"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-percentage">0%</span> Completed
                    </div>
                    <div class="required-fields">
                        Required Fields Complete <span id="completed-fields">0</span> / <span id="total-required-fields">24</span>
                    </div>
                </div>
                <div class="time-notice">
                    <p><i class="fas fa-clock"></i> Please review the attached claim worksheet. Please provide your response within <strong>two hours</strong>.</p>
                    <p>This ensures we can maintain a reasonable timeline for communicating our decision to the repair facility.</p>
                    <p class="warning"><i class="fas fa-exclamation-triangle"></i> We will move forward with our decision after 2 hours if no response is returned.</p>
                </div>
            </div>
        </header>

        <form id="claim-form">
            <!-- Form Sections -->
            <div class="form-navigation">
                <button type="button" class="nav-btn active" data-section="dealer-info">Dealer Information</button>
                <button type="button" class="nav-btn" data-section="contract-info">Contract Information</button>
                <button type="button" class="nav-btn" data-section="vehicle-info">Vehicle Information</button>
                <button type="button" class="nav-btn" data-section="claim-details">Claim Details</button>
                <button type="button" class="nav-btn" data-section="inspection">Inspection & Findings</button>
                <button type="button" class="nav-btn" data-section="cost-recommendation">Cost & Recommendation</button>
            </div>

            <!-- Dealer Information Section -->
            <section id="dealer-info" class="form-section active">
                <h2>Dealer Information</h2>
                <div class="form-row">
                    <div class="form-group required">
                        <label for="selling-dealer">Selling Dealer</label>
                        <input type="text" id="selling-dealer" name="selling-dealer" required>
                    </div>
                    <div class="form-group required">
                        <label for="adjuster">Adjuster on Claim</label>
                        <input type="text" id="adjuster" name="adjuster" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="current-dealer">Dealer where the vehicle is now</label>
                        <input type="text" id="current-dealer" name="current-dealer" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Address of dealer/servicer where the vehicle is now (If not at the selling dealer)</label>
                    <div class="address-container">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="street-address">Street Address</label>
                                <input type="text" id="street-address" name="street-address">
                            </div>
                            <div class="form-group">
                                <label for="street-address-2">Street Address Line 2</label>
                                <input type="text" id="street-address-2" name="street-address-2">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="city">City</label>
                                <input type="text" id="city" name="city">
                            </div>
                            <div class="form-group">
                                <label for="state">State / Province</label>
                                <select id="state" name="state">
                                    <option value="">Select State</option>
                                    <option value="AL">Alabama</option>
                                    <option value="AK">Alaska</option>
                                    <!-- Add all states here -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="zip">Postal / Zip Code</label>
                                <input type="text" id="zip" name="zip">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Agent Name (Leave blank for Chris Finn)</label>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="agent-first-name">First Name</label>
                            <input type="text" id="agent-first-name" name="agent-first-name">
                        </div>
                        <div class="form-group">
                            <label for="agent-last-name">Last Name</label>
                            <input type="text" id="agent-last-name" name="agent-last-name">
                        </div>
                    </div>
                </div>

                <div class="form-navigation-buttons">
                    <button type="button" class="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </section>

            <!-- Contract Information Section -->
            <section id="contract-info" class="form-section">
                <h2>Contract Information</h2>
                <div class="form-row">
                    <div class="form-group required">
                        <label>Contract holder name</label>
                        <div class="name-container">
                            <div class="form-group">
                                <label for="contract-first-name">First Name</label>
                                <input type="text" id="contract-first-name" name="contract-first-name" required>
                            </div>
                            <div class="form-group">
                                <label for="contract-last-name">Last Name</label>
                                <input type="text" id="contract-last-name" name="contract-last-name" required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="reinsured-contract">Reinsured Contract?</label>
                        <select id="reinsured-contract" name="reinsured-contract">
                            <option value="">Please Select</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                    <div class="form-group required">
                        <label for="claim-number">Claim number</label>
                        <input type="text" id="claim-number" name="claim-number" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="previous-claims">Previous Claims Paid ($)</label>
                        <input type="number" id="previous-claims" name="previous-claims" min="0" step="0.01" required>
                    </div>
                    <div class="form-group required">
                        <label for="acv">ACV</label>
                        <input type="number" id="acv" name="acv" min="0" step="0.01" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="lienholder">LIENHOLDER ON THE CONTRACT</label>
                        <input type="text" id="lienholder" name="lienholder" required>
                    </div>
                    <div class="form-group required">
                        <label for="pending-contract">PENDING CONTRACT?</label>
                        <select id="pending-contract" name="pending-contract" required>
                            <option value="">Please Select</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="authorization-type">Authorization Type</label>
                        <select id="authorization-type" name="authorization-type">
                            <option value="">Please Select</option>
                            <option value="verbal">Verbal</option>
                            <option value="written">Written</option>
                            <option value="email">Email</option>
                        </select>
                    </div>
                    <div class="form-group required">
                        <label for="purchase-date">Date of Purchase</label>
                        <input type="date" id="purchase-date" name="purchase-date" required>
                    </div>
                </div>

                <div class="form-navigation-buttons">
                    <button type="button" class="prev-btn"><i class="fas fa-arrow-left"></i> Previous</button>
                    <button type="button" class="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </section>

            <!-- Vehicle Information Section -->
            <section id="vehicle-info" class="form-section">
                <h2>Vehicle Information</h2>
                <div class="form-row">
                    <div class="form-group required">
                        <label for="vin">VIN Number</label>
                        <input type="text" id="vin" name="vin" required>
                        <button type="button" id="decode-vin" class="secondary-btn">Decode VIN</button>
                    </div>
                </div>

                <div id="vin-details" class="hidden">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Vehicle Make</label>
                            <input type="text" id="vehicle-make" name="vehicle-make" readonly>
                        </div>
                        <div class="form-group">
                            <label>Vehicle Model</label>
                            <input type="text" id="vehicle-model" name="vehicle-model" readonly>
                        </div>
                        <div class="form-group">
                            <label>Vehicle Year</label>
                            <input type="text" id="vehicle-year" name="vehicle-year" readonly>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="mileage-purchase">Mileage at purchase</label>
                        <input type="number" id="mileage-purchase" name="mileage-purchase" min="0" required>
                    </div>
                    <div class="form-group required">
                        <label for="current-mileage">Current Mileage</label>
                        <input type="number" id="current-mileage" name="current-mileage" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="miles-since-purchase">Miles Since Purchase</label>
                        <input type="number" id="miles-since-purchase" name="miles-since-purchase" readonly>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="maintenance-records">Maintenance records validated?</label>
                        <select id="maintenance-records" name="maintenance-records">
                            <option value="">Please Select</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                            <option value="partial">Partial</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="vehicle-surcharges">Vehicle Surcharges</label>
                        <select id="vehicle-surcharges" name="vehicle-surcharges" multiple>
                            <option value="4x4">4x4/AWD</option>
                            <option value="diesel">Diesel</option>
                            <option value="turbo">Turbo/Supercharged</option>
                            <option value="hybrid">Hybrid</option>
                            <option value="luxury">Luxury</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="tsb-checked">TSB's checked</label>
                        <select id="tsb-checked" name="tsb-checked">
                            <option value="">Please Select</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="power-sports">Power Sports Surcharges</label>
                        <select id="power-sports" name="power-sports" multiple>
                            <option value="none">None</option>
                            <option value="atv">ATV</option>
                            <option value="motorcycle">Motorcycle</option>
                            <option value="watercraft">Watercraft</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="apex-surcharges">Apex Surcharges</label>
                        <select id="apex-surcharges" name="apex-surcharges" multiple>
                            <option value="none">None</option>
                            <option value="commercial">Commercial</option>
                            <option value="lift-kit">Lift Kit</option>
                            <option value="snow-plow">Snow Plow</option>
                        </select>
                    </div>
                </div>

                <div class="form-navigation-buttons">
                    <button type="button" class="prev-btn"><i class="fas fa-arrow-left"></i> Previous</button>
                    <button type="button" class="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </section>

            <!-- Claim Details Section -->
            <section id="claim-details" class="form-section">
                <h2>Claim Details</h2>
                <div class="form-row">
                    <div class="form-group required">
                        <label for="claim-submission-date">Date claim was submitted to us</label>
                        <input type="date" id="claim-submission-date" name="claim-submission-date" required>
                    </div>
                    <div class="form-group required">
                        <label for="claim-entry-date">Date of Claim Entry (When the Repair order was opened)</label>
                        <input type="date" id="claim-entry-date" name="claim-entry-date" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="days-since-purchase">Days Since Purchase</label>
                        <input type="number" id="days-since-purchase" name="days-since-purchase" readonly>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="warranties-checked">We're the following warranties checked</label>
                        <select id="warranties-checked" name="warranties-checked" required multiple>
                            <option value="manufacturer">Manufacturer</option>
                            <option value="powertrain">Powertrain</option>
                            <option value="emissions">Emissions</option>
                            <option value="recalls">Recalls</option>
                            <option value="none">None</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="rideshare">Was the vehicle used for Rideshare?</label>
                        <select id="rideshare" name="rideshare">
                            <option value="">Please Select</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                            <option value="unknown">Unknown</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="abuse-neglect">Was there abuse or neglect?</label>
                        <select id="abuse-neglect" name="abuse-neglect">
                            <option value="">Please Select</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                            <option value="unknown">Unknown</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="modifications">Signs of Modifications?</label>
                        <select id="modifications" name="modifications">
                            <option value="">Please Select</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                </div>

                <div id="modifications-details" class="form-row hidden">
                    <div class="form-group">
                        <label for="modifications-found">What were the modifications found</label>
                        <textarea id="modifications-found" name="modifications-found" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="contract-type">Contract Type</label>
                        <select id="contract-type" name="contract-type" required>
                            <option value="">Please Select</option>
                            <option value="powertrain">Powertrain</option>
                            <option value="silver">Silver</option>
                            <option value="gold">Gold</option>
                            <option value="platinum">Platinum</option>
                            <option value="wrap">Wrap</option>
                        </select>
                    </div>
                </div>

                <div class="form-navigation-buttons">
                    <button type="button" class="prev-btn"><i class="fas fa-arrow-left"></i> Previous</button>
                    <button type="button" class="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </section>

            <!-- Inspection & Findings Section -->
            <section id="inspection" class="form-section">
                <h2>Inspection & Findings</h2>
                <div class="form-row">
                    <div class="form-group required">
                        <label for="failed-components">Failed Component(s)</label>
                        <input type="text" id="failed-components" name="failed-components" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="tech-findings">What did the tech find?</label>
                        <textarea id="tech-findings" name="tech-findings" rows="4" required></textarea>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="inspection-ordered">Inspection Ordered?</label>
                        <select id="inspection-ordered" name="inspection-ordered" required>
                            <option value="">Please Select</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                </div>

                <div id="inspector-findings-container" class="form-row hidden">
                    <div class="form-group">
                        <label for="inspector-findings">What did the inspector find?</label>
                        <textarea id="inspector-findings" name="inspector-findings" rows="4"></textarea>
                    </div>
                </div>

                <div class="form-navigation-buttons">
                    <button type="button" class="prev-btn"><i class="fas fa-arrow-left"></i> Previous</button>
                    <button type="button" class="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </section>

            <!-- Cost & Recommendation Section -->
            <section id="cost-recommendation" class="form-section">
                <h2>Cost & Recommendation</h2>
                <div class="form-row">
                    <div class="form-group required">
                        <label for="repair-cost">Cost of Repairs</label>
                        <div class="input-with-prefix">
                            <span class="prefix">$</span>
                            <input type="number" id="repair-cost" name="repair-cost" min="0" step="0.01" required>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="goodwill-cost">Cost if we decide to Goodwill this claim</label>
                        <div class="input-with-prefix">
                            <span class="prefix">$</span>
                            <input type="number" id="goodwill-cost" name="goodwill-cost" min="0" step="0.01">
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="adjusted-cost">Cost after adjustments</label>
                        <div class="input-with-prefix">
                            <span class="prefix">$</span>
                            <input type="number" id="adjusted-cost" name="adjusted-cost" min="0" step="0.01" required>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="price-adjustment-explanation">Explain the difference in the price adjustment</label>
                        <textarea id="price-adjustment-explanation" name="price-adjustment-explanation" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="adjuster-recommendation">Adjuster's Recommendation</label>
                        <select id="adjuster-recommendation" name="adjuster-recommendation" required>
                            <option value="">Please Select</option>
                            <option value="approve">Approve</option>
                            <option value="deny">Deny</option>
                            <option value="partial">Partial Approval</option>
                            <option value="goodwill">Goodwill</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="comments">Comments</label>
                        <textarea id="comments" name="comments" rows="4"></textarea>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="inspection-link">Link to inspection</label>
                        <input type="url" id="inspection-link" name="inspection-link">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="file-upload">File Upload</label>
                        <div class="file-upload-container">
                            <input type="file" id="file-upload" name="file-upload" multiple>
                            <label for="file-upload" class="file-upload-label">
                                <i class="fas fa-cloud-upload-alt"></i> Browse Files
                            </label>
                            <div class="file-upload-text">Drag and drop files here</div>
                            <div id="file-list" class="file-list"></div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="accuracy-check">Double Check for Accuracy</label>
                        <div class="checkbox-container">
                            <input type="checkbox" id="accuracy-check" name="accuracy-check" required>
                            <label for="accuracy-check">I confirm that all information provided is accurate and complete</label>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="director-reviewed">Director Reviewed</label>
                        <div class="checkbox-container">
                            <input type="checkbox" id="director-reviewed" name="director-reviewed">
                            <label for="director-reviewed">This claim has been reviewed by a director</label>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="review-time">Time</label>
                        <div class="time-container">
                            <input type="number" id="review-hour" name="review-hour" min="1" max="12" placeholder="HH">
                            <span>:</span>
                            <input type="number" id="review-minute" name="review-minute" min="0" max="59" placeholder="MM">
                            <select id="review-ampm" name="review-ampm">
                                <option value="AM">AM</option>
                                <option value="PM">PM</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group required">
                        <label for="recipient-email">Email Recipient</label>
                        <input type="email" id="recipient-email" name="recipient-email" placeholder="Enter email address" value="claimsteam@ascentadmin.com" required>
                        <small class="form-text">Enter the email address where this claim form should be sent. Default is claimsteam@ascentadmin.com</small>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="cc-emails">CC Recipients (Optional)</label>
                        <input type="text" id="cc-emails" name="cc-emails" placeholder="Enter email addresses separated by commas">
                        <small class="form-text">Enter additional email addresses to CC, separated by commas.</small>
                    </div>
                </div>

                <div class="form-navigation-buttons">
                    <button type="button" class="prev-btn"><i class="fas fa-arrow-left"></i> Previous</button>
                    <div class="submit-buttons">
                        <button type="button" id="save-btn" class="secondary-btn">Save</button>
                        <button type="button" id="preview-btn" class="secondary-btn"><i class="fas fa-eye"></i> Preview Email</button>
                        <button type="submit" id="submit-btn" class="primary-btn">Submit</button>
                    </div>
                </div>
            </section>
        </form>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Confirm Submission</h2>
            <p>Are you sure you want to submit this claim form? All information will be sent to <span id="confirm-email"></span>.</p>
            <div class="modal-buttons">
                <button id="cancel-submit" class="secondary-btn">Cancel</button>
                <button id="confirm-submit" class="primary-btn">Confirm Submission</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Form Submitted Successfully</h2>
            <p>Your claim form has been sent to <span id="success-email"></span>.</p>
            <div class="modal-buttons">
                <button id="new-form" class="primary-btn">Start New Form</button>
            </div>
        </div>
    </div>
    
    <!-- Preview Modal -->
    <div id="preview-modal" class="modal">
        <div class="modal-content preview-content">
            <span class="close">&times;</span>
            <h2>Email Preview</h2>
            <p>This is how your email will appear to the recipient:</p>
            <div class="email-recipient-info">
                <p><strong>To:</strong> <span id="preview-recipient"></span></p>
                <p><strong>CC:</strong> <span id="preview-cc"></span></p>
                <p><strong>Subject:</strong> <span id="preview-subject"></span></p>
            </div>
            <div class="email-preview-container">
                <iframe id="email-preview-frame" style="width: 100%; height: 500px; border: 1px solid #ddd;"></iframe>
            </div>
            <div class="modal-buttons">
                <button id="edit-email" class="secondary-btn">Edit</button>
                <button id="send-email" class="primary-btn">Send Email</button>
            </div>
        </div>
    </div>

    <script src="js/script.js"></script>
</body>
</html>